%\pgfdeclarelayer{bottom}
%\pgfdeclarelayer{top}
%\pgfsetlayers{bottom,main,top}
\begin{tikzpicture}[scale=.9,every node/.style={minimum size=1cm},on grid]
%    \begin{pgfonlayer}{bottom}
        \begin{scope}[
        	yshift=0,every node/.append style={
        	yslant=0.5,xslant=-1.3},yslant=0.5,xslant=-1.3]
            \fill[white,fill opacity=.9] (0,0) rectangle (5,5);
            \draw[black,very thick] (0,0) rectangle (5,5);
            \draw[step=2mm, black] (0,0) grid (5,5);
            \fill[red,fill opacity=.7] (0,0) rectangle (.8,.8);
            %\draw[red,very thick] (0,0) rectangle (1,1);
%            \node[red,rectangle,name=B,draw] at (0,0) {q};
        \end{scope}
%    \end{pgfonlayer}
    	
%    \begin{pgfonlayer}{top}
        \begin{scope}[
        	yshift=90,every node/.append style={
        	yslant=0.5,xslant=-1.3},yslant=0.5,xslant=-1.3]
        	\fill[white,fill opacity=1] (0,0) rectangle (5,5);
        	\draw[step=2mm, black] (.2,.2) grid (4.8,4.8);
        	\draw[black,very thick] (.2,.2) rectangle (4.8,4.8);
        	\draw[black,very thick] (0,0) rectangle (5,5);
            \fill[green,fill opacity=.7] (0.2,0.2) rectangle (.4,.4);
%            \node[red,name=A,rectangle,draw] (0.2,0.2) {Q};
%            \begin{pgfonlayer}{bottom}
%            \foreach \i in {north east,north west,south west,south east}
%                \draw (A.\i) -- (B.\i);
%            \end{pgfonlayer}
        \end{scope}
%    \end{pgfonlayer}
    	
    \begin{scope}[
    	yshift=100,every node/.append style={
    	yslant=0.5,xslant=-1.3},yslant=0.5,xslant=-1.3]
    	\fill[white,fill opacity=1] (0,0) rectangle (5,5);
    	\draw[step=2mm, black] (.2,.2) grid (4.8,4.8);
    	\draw[black,very thick] (.2,.2) rectangle (4.8,4.8);
    	\draw[black,very thick] (0,0) rectangle (5,5);
        \fill[green,fill opacity=.7] (0.2,0.2) rectangle (.4,.4);
    \end{scope}
    	
    \begin{scope}[
    	yshift=110,every node/.append style={
    	yslant=0.5,xslant=-1.3},yslant=0.5,xslant=-1.3]
    	\fill[white,fill opacity=1] (0,0) rectangle (5,5);
    	\draw[step=2mm, black] (.2,.2) grid (4.8,4.8);
    	\draw[black,very thick] (.2,.2) rectangle (4.8,4.8);
    	\draw[black,very thick] (0,0) rectangle (5,5);
        \fill[green,fill opacity=.7] (0.2,0.2) rectangle (.4,.4);
    \end{scope}
    	
    \begin{scope}[
    	yshift=120,every node/.append style={
    	yslant=0.5,xslant=-1.3},yslant=0.5,xslant=-1.3]
    	\fill[white,fill opacity=1] (0,0) rectangle (5,5);
    	\draw[step=2mm, black] (.2,.2) grid (4.8,4.8);
    	\draw[black,very thick] (.2,.2) rectangle (4.8,4.8);
    	\draw[black,very thick] (0,0) rectangle (5,5);
        \fill[green,fill opacity=.7] (0.2,0.2) rectangle (.4,.4);
    \end{scope}
    	
    %putting arrows and labels:
    \draw[-latex,thick] (6.2,2) node[right]{Input Image}
         to[out=180,in=90] (4,2);

    \draw[-latex,thick](5.9,5)node[right]{$\mathbf{Filter_1}$}
        to[out=180,in=90] (3.6,5);

    \draw[-latex,thick](5.9,5.5)node[right]{$\mathbf{Filter_2}$}
        to[out=180,in=90] (3.6,5.5);

    \draw[-latex,thick](5.9,6)node[right]{$\mathbf{Filter_3}$}
        to[out=180,in=90] (3.6,6);

    \draw[-latex,thick](5.9,6.5)node[right]{$\mathbf{Filter_4}$}
        to[out=180,in=90] (3.6,6.5);

    \draw[red,thick](-0.05,3.17) to (0,0);
    \draw[red,thick](0.15,3.22) to (0.8,0.4);
    \draw[red,thick](-0.29,3.22) to (-0.99,0.3);
    \draw[red,thick](-0.15,3.20) to (-0.23,0.65);

\end{tikzpicture}
